% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model.R
\name{evaluate_model}
\alias{evaluate_model}
\alias{evaluate}
\alias{evaluate_state}
\alias{evaluate_effect}
\alias{evaluate_effect.component}
\alias{evaluate_effect_single_state}
\alias{evaluate_effect.component_list}
\alias{evaluate_predictor}
\title{Evaluate or sample from a posterior result given a model and locations}
\usage{
evaluate_model(
  model,
  result,
  data,
  state = NULL,
  A = NULL,
  predictor = NULL,
  property = "mode",
  format = NULL,
  n = 1,
  seed = 0L,
  num.threads = NULL,
  ...
)

evaluate_state(
  model,
  result,
  property = "mode",
  n = 1,
  seed = 0L,
  num.threads = NULL,
  ...
)

evaluate_effect(...)

\method{evaluate_effect}{component}(component, data, state, A = NULL, ...)

evaluate_effect_single_state(state, components, data, A = NULL, ...)

\method{evaluate_effect}{component_list}(components, data, state, A = NULL, ...)

evaluate_predictor(model, data, state, effects, predictor, format = "auto")
}
\arguments{
\item{model}{An \link{bru} model}

\item{result}{Posterior of an \link{bru} or \link{lgcp} run.}

\item{data}{A \code{list}, \code{data.frame}, or \code{Spatial*DataFrame}, with coordinates
and covariates needed to evaluate the model.}

\item{state}{A list where each element is a named list of latent state
information, as produced by \code{\link[=evaluate_state]{evaluate_state()}}}

\item{A}{A matrix overriding the default projection matrix or matrices
(named list of matrices for \code{evaluate_effect.component_list})}

\item{predictor}{Either a formula or expression}

\item{property}{Property of the model components to obtain value from.
Default: "mode". Other options are "mean", "0.025quant", "0.975quant",
"sd" and "sample". In case of "sample" you will obtain samples from the
posterior (see \code{n} parameter).}

\item{format}{character; determines the storage format of the output.
Available options:
\itemize{
\item \code{"auto"} If the first evaluated result is a vector or single-column matrix,
the "matrix" format is used, otherwise "list".
\item \code{"matrix"} A matrix where each column contains the evaluated predictor
expression for a state.
\item \code{"list"} A list where each column contains the evaluated predictor
expression for a state.
}

Default: "auto"}

\item{n}{Number of samples to draw.}

\item{seed}{If seed != 0L, the random seed}

\item{num.threads}{Specification of desired number of threads for parallel
computations. Default NULL, leaves it up to INLA.
When seed != 0, overridden to "1:1"}

\item{\dots}{Additional arguments passed on to \code{inla.posterior.sample}}

\item{component}{An component.}

\item{effects}{A list where each element is named list of evaluated effects,
as computed by \code{\link[=evaluate_effect.component_list]{evaluate_effect.component_list()}}}

\item{...}{Unused.}
}
\value{
A numeric vector of the component effect values
state.

A list is returned, as specified by \code{format}
}
\description{
Calculates a latent component given some data and the state of the
component's internal random variables.

Evaluate component effects or expressions, based on a bru model and one or
several states of the latent variables and hyperparameters.
}
\details{
TODO: Improve speed for iterated calls by making 'mapped' a parameter
}
\author{
Fabian E. Bachl \email{bachlfab@gmail.com} and
Finn Lindgren \email{finn.lindgren@gmail.com}
}
\keyword{internal}
